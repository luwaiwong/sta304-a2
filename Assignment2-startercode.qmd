---
title: "ADD IN MEANINGFUL TITLE HERE"
author: "GROUP NUMBER: ADD YOUR NAMES HERE"
subtitle: "STA304 - Winter 2025 - Assignment 2"
format: pdf
editor: visual
---

```{r, include = FALSE}

# Here you can load in and clean the data (you may need to do the cleaning in a separate R script - this is up to you). 
library(tidyverse)

phone_data <- read_csv("ces_phone.csv")
web_data <- read_csv("ces_web.csv")

# You may need additional chunks, in case you want to include some of the cleaning output.

```

# 1 Introduction

In this section you will briefly describe your report. Explain the importance of the subsequent analysis and prepare the reader for what they will read in the subsequent sections. Provide an overview of the research question. Briefly describe the 2019 Canadian Federal Election Study and its relevance. State the purpose and goals/hypotheses of the report.

# 2 Data

Our data will be based upon the web survey from the 2019 Canadian Federal Election Study. The key variables of interest for this report are gender, age, and vote choice. Gender will be used as the stratification variable, and age will be used in conjunction to predict the log odds of voting for the Liberal party.

With regards to data processing and cleaning, columns for the data set for were renamed to "gender", "age", and "vote_choice". Additionally, options for vote choice were then standardized to:

-   "Liberal"

-   "Conservative"

-   "NDP"

-   "Bloc Quebec"

-   "Green Party"

-   "People's Party"

-   "Other"

And options for gender were standardized to:

-   "Male"

-   "Female"

-   "Other"

```{r, include = FALSE}
# Cleaning Variable Data & Updating Labels
## Web Data
web_data <- web_data %>%
  mutate(
    # Age
    age = cps19_yob,
    # Gender
    # Gender - standardize from numeric codes to text
    gender = case_when(
      cps19_gender == 1 ~ "Male",
      cps19_gender == 2 ~ "Female",
      cps19_gender == 3 ~ "Other",
      TRUE ~ NA_character_
    ),
    # Vote choice standardization
    vote_choice = case_when(
      cps19_votechoice == 1 ~ "Liberal",
      cps19_votechoice == 2 ~ "Conservative",
      cps19_votechoice == 3 ~ "NDP",
      cps19_votechoice == 4 ~ "Bloc Quebec",
      cps19_votechoice == 5 ~ "Green Party",
      cps19_votechoice == 6 ~ "People's Party",
      cps19_votechoice == 7 ~ "Other",
      cps19_votechoice == 9 ~ NA_character_,
      TRUE ~ NA_character_
    )
  )


# Cleaning Data & Renaming Columns
web_data <- web_data %>% rename(
#  gender = cps19_gender,
#  age = cps19_yob,
#  provnice = cps19_province,
#  education = cps19_education,
  interest = cps19_interest_elxn_1,    
#  vote_certainty = cps19_v_likely,
#  vote_choice = cps19_votechoice
)
```

Due to the nature of our study focusing on wider population trends, as well as the low response rate of individuals who reported "Other (Trans, Non-Binary, Two-Spirit, etc)", we are choosing to drop the "Other" category in gender during our analysis and are focusing on "Male" and "Female". The distribution of gender can be seen in the bar plot below:

```{r, echo = TRUE}

# Use this to create your plots/visualization. 
# Create a bar plot for gender distribution
ggplot(web_data, aes(x = gender)) +
  geom_bar(fill = "steelblue") +
  labs(title = "Distribution of Gender in Web Survey Data",
       x = "Gender",
       y = "Count") +
  theme_minimal()

```

# 3 Methods

Include the formula for calculating the confidence interval for proportions (do not include specific numbers yet) and provide a description of its components. Present the logistic regression model, specifying the independent variables and expected interpretation of coefficients (parameters, not estimates), and describe the model. In this section you are preparing the reader for how to interpret the numbers displayed in the next section (Results).

Be sure to include your CI formula, and a description of the components of the formula. (somebody describe it)

$$\bar{X} \pm \chi_{\alpha/2} \sqrt{\frac{1+1}{n}}$$

Our logistic regression model for predicting the log odds of voting for the Liberal party is described mathematically as below:

$$log(\frac{p}{1-p}) = \beta_0 + \beta_1 x_{male} + \beta_2x_{female} + \beta_3x_{age}$$

Independent variables for the model are:

-   Male: Is 0 if the voter is not male, 1 if the voter is male. Describes the log odds of someone voting Liberal, if they are male

-   Female: Is 0 if the voter is not female, 1 if the voter is female. Describes the log odds of someone voting Liberal, if they are female

-   Age: Describes the age of the voter. Describes the change in log odds of someone voting Liberal, as their age increases

# 4 Results

Present a table showing the estimated proportion of votes for the selected party along with the 95% confidence interval, and include text describing this table and the key takeaways.

```{r, include = FALSE}

# Here you can run code to calculate your Confidence Intervals.

```

In Table 1 I present both confidence intervals of....

|   | Proportion of Outcome Variable | 95% Confidence Interval of Outcome Variable |
|------------------------|------------------------|------------------------|
| Phone Survey | 0.34 | (lower bound, upper bound) |
| Web Survey | 0.25 | (lower bound, upper bound) |

: The proportions and 95% confidence intervals of outcome variable of interest calculated for both the Canadian Election Study 2019 phone and web survey data.

Provide a table or formula of the estimated logistic regression model, and include text describing this table/formula and the key takeaways. Interpret the estimates from the logistic regression model. Specifically, commenting on how the predictor variables relate to the outcome variable.

Below is the estimate regression model....

$$
\hat{y} = 18x+3
$$

# 5 Discussion

Summarize key findings. Discuss limitations of the analysis (e.g., potential biases, missing variables, survey errors). Provide recommendations for future research or improvements.

# 6 Generative AI Statement

Here is where you can explain your usage of Generative AI tool(s). Be sure to reference any tools with inline citations.

Alternatively, if you did not use Generative AI, please include a brief statement outlining your workflow for completing this assignment.

# 7 Ethics Statement

Explain how you ensured that your analysis is reproducible (e.g., documenting code, using proper statistical methods).

Since the CES 2019 data is publicly available, describe whether or not this the work completed in your report needs Research Ethics Board approval for the report the be made publicly available. Be sure to specifically discuss the privacy of human participants in this study.

\newpage

# 8 Bibliography

1.  Grolemund, G. (2014, July 16) *Introduction to R Markdown*. RStudio. <https://rmarkdown.rstudio.com/articles_intro.html>. (Last Accessed: April 4, 1991)

2.  Dekking, F. M., et al. (2005) *A Modern Introduction to Probability and Statistics: Understanding why and how.* Springer Science & Business Media.

3.  Allaire, J.J., et. el. *References: Introduction to R Markdown*. RStudio. <https://rmarkdown.rstudio.com/docs/>. (Last Accessed: April 4, 1991)

\newpage

# 9 Appendix

Any additional notes/derivations that are supplementary to the report can be added in an appendix. This section will not be directly graded, but may be included for completion-sake.
