---
title: "ADD IN MEANINGFUL TITLE HERE"
author: "GROUP NUMBER: ADD YOUR NAMES HERE"
subtitle: "STA304 - Winter 2025 - Assignment 2"
format: pdf
editor: visual
---

```{r, include = FALSE}

# Here you can load in and clean the data (you may need to do the cleaning in a separate R script - this is up to you). 
library(tidyverse)

phone_data <- read_csv("ces_phone.csv")
web_data <- read_csv("ces_web.csv")

# You may need additional chunks, in case you want to include some of the cleaning output.

```

# 1 Introduction

In this section you will briefly describe your report. Explain the importance of the subsequent analysis and prepare the reader for what they will read in the subsequent sections. Provide an overview of the research question. Briefly describe the 2019 Canadian Federal Election Study and its relevance. State the purpose and goals/hypotheses of the report.

# 2 Data

Briefly introduce the data and key variables of interest. If you do any general data cleaning or data processing you should describe it (in a reproducible manner) here. Identify the stratification variable used. Include at least one plot displaying the distribution of the strata variable. If you do any data cleaning or data processing to the you should describe it (in a reproducible manner) in this section.

Our two sources of data used different formats for column names, as well as result names. In order to make it easier to read the data, as well as to make comparisons easier, columns for both datasets are renamed and standardised to:

-   Gender
-   Age
-   Province
-   Education
-   Political Interest
-   Vote Certainty
-   Vote Choice

Options for those columns are also standardized into the same format. For example, with the options for Gender renamed to "Male", "Female", or "Other"

Standardization of data and columns names was done with assistance with Generative AI (Claude 3.5 Sonnet, <https://claude.ai/chat/81e69346-0b7c-448a-8e82-e8450b894d18>)

```{r, include = FALSE}
# Cleaning Variable Data & Updating Labels
## Web Data
web_data <- web_data %>%
  mutate(
    province = case_when(
      cps19_province == 14 ~ "Alberta",
      cps19_province == 15 ~ "British Columbia",
      cps19_province == 16 ~ "Manitoba",
      cps19_province == 17 ~ "New Brunswick",
      cps19_province == 18 ~ "Newfoundland & Labrador",
      cps19_province == 19 ~ "Northwest Territories",
      cps19_province == 20 ~ "Nova Scotia",
      cps19_province == 21 ~ "Nunavut",
      cps19_province == 22 ~ "Ontario",
      cps19_province == 23 ~ "Prince Edward Island",
      cps19_province == 24 ~ "Quebec",
      cps19_province == 25 ~ "Saskatchewan",
      cps19_province == 26 ~ "Yukon",
      TRUE ~ NA_character_
    ),
    # Education standardization
    education = case_when(
      cps19_education == 1 ~ "No schooling",
      cps19_education == 2 ~ "Some elementary school",
      cps19_education == 3 ~ "Completed elementary school",
      cps19_education == 4 ~ "Some secondary/high school",
      cps19_education == 5 ~ "Completed secondary/high school",
      cps19_education == 6 ~ "Some technical, community college",
      cps19_education == 7 ~ "Completed technical, community college",
      cps19_education == 8 ~ "Some university",
      cps19_education == 9 ~ "Bachelor's degree",
      cps19_education == 10 ~ "Master's degree",
      cps19_education == 11 ~ "Professional degree or doctorate",
      cps19_education == 12 ~ NA_character_,
      TRUE ~ NA_character_
    ),   
    # Vote certainty standardization
    vote_certainty = case_when(
      cps19_v_likely == 1 ~ "Certain",
      cps19_v_likely == 2 ~ "Likely",
      cps19_v_likely == 3 ~ "Unlikely",
      cps19_v_likely == 4 ~ "Certain to not vote",
      cps19_v_likely == 5 ~ "Not eligible",
      cps19_v_likely == 6 ~ NA_character_,
      cps19_v_likely == 7 ~ "Voted in advance",
      TRUE ~ NA_character_
    ),
    # Age
    age = cps19_yob,
    # Gender
    gender = cps19_gender,
    # Vote choice standardization
    vote_choice = case_when(
      cps19_votechoice == 1 ~ "Liberal",
      cps19_votechoice == 2 ~ "Conservative",
      cps19_votechoice == 3 ~ "NDP",
      cps19_votechoice == 4 ~ "Bloc Quebec",
      cps19_votechoice == 5 ~ "Green Party",
      cps19_votechoice == 6 ~ "People's Party",
      cps19_votechoice == 7 ~ "Other",
      cps19_votechoice == 9 ~ NA_character_,
      TRUE ~ NA_character_
    )
  )


# Cleaning Data & Renaming Columns
web_data <- web_data %>% rename(
#  gender = cps19_gender,
#  age = cps19_yob,
#  provnice = cps19_province,
#  education = cps19_education,
  interest = cps19_interest_elxn_1,    
#  vote_certainty = cps19_v_likely,
#  vote_choice = cps19_votechoice
)
```

# 

Be sure to have text describing any plots or tables included.

```{r, echo = FALSE}

# Use this to create your plots/visualization. 

hist(phone_data$q3) 

```

# 3 Methods

Include the formula for calculating the confidence interval for proportions (do not include specific numbers yet) and provide a description of its components. Present the logistic regression model, specifying the independent variables and expected interpretation of coefficients (parameters, not estimates), and describe the model. In this section you are preparing the reader for how to interpret the numbers displayed in the next section (Results).

Be sure to include your CI formula, and a description of the components of the formula.

$$\bar{X} \pm \chi_{\alpha/2} \sqrt{\frac{1+1}{n}}$$

Be sure to include your logistic regression model, and a description of the components of the model.

$$y = mx+ b$$

# 4 Results

Present a table showing the estimated proportion of votes for the selected party along with the 95% confidence interval, and include text describing this table and the key takeaways.

```{r, include = FALSE}

# Here you can run code to calculate your Confidence Intervals.

```

In Table 1 I present both confidence intervals of....

|   | Proportion of Outcome Variable | 95% Confidence Interval of Outcome Variable |
|------------------------|------------------------|------------------------|
| Phone Survey | 0.34 | (lower bound, upper bound) |
| Web Survey | 0.25 | (lower bound, upper bound) |

: The proportions and 95% confidence intervals of outcome variable of interest calculated for both the Canadian Election Study 2019 phone and web survey data.

Provide a table or formula of the estimated logistic regression model, and include text describing this table/formula and the key takeaways. Interpret the estimates from the logistic regression model. Specifically, commenting on how the predictor variables relate to the outcome variable.

Below is the estimate regression model....

$$
\hat{y} = 18x+3
$$

# 5 Discussion

Summarize key findings. Discuss limitations of the analysis (e.g., potential biases, missing variables, survey errors). Provide recommendations for future research or improvements.

# 6 Generative AI Statement

Here is where you can explain your usage of Generative AI tool(s). Be sure to reference any tools with inline citations.

Alternatively, if you did not use Generative AI, please include a brief statement outlining your workflow for completing this assignment.

# 7 Ethics Statement

Explain how you ensured that your analysis is reproducible (e.g., documenting code, using proper statistical methods).

Since the CES 2019 data is publicly available, describe whether or not this the work completed in your report needs Research Ethics Board approval for the report the be made publicly available. Be sure to specifically discuss the privacy of human participants in this study.

\newpage

# 8 Bibliography

1.  Grolemund, G. (2014, July 16) *Introduction to R Markdown*. RStudio. <https://rmarkdown.rstudio.com/articles_intro.html>. (Last Accessed: April 4, 1991)

2.  Dekking, F. M., et al. (2005) *A Modern Introduction to Probability and Statistics: Understanding why and how.* Springer Science & Business Media.

3.  Allaire, J.J., et. el. *References: Introduction to R Markdown*. RStudio. <https://rmarkdown.rstudio.com/docs/>. (Last Accessed: April 4, 1991)

\newpage

# 9 Appendix

Any additional notes/derivations that are supplementary to the report can be added in an appendix. This section will not be directly graded, but may be included for completion-sake.
